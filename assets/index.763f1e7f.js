var w=Object.defineProperty,M=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var v=Object.getOwnPropertySymbols;var P=Object.prototype.hasOwnProperty,D=Object.prototype.propertyIsEnumerable;var y=(e,r,n)=>r in e?w(e,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[r]=n,h=(e,r)=>{for(var n in r||(r={}))P.call(r,n)&&y(e,n,r[n]);if(v)for(var n of v(r))D.call(r,n)&&y(e,n,r[n]);return e},E=(e,r)=>M(e,x(r));import{j as i,a as s,H as B,D as j,c as b,b as A,d as $,t as U,e as q,u as z,f as G,r as f,g as K,F as W,R as J,h as Q,P as V}from"./vendor.7b326c30.js";const X=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const _ of a.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&d(_)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function d(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};X();var Y={};const Z="_Layout_3r8cj_1",ee="_Header_3r8cj_9",re="_Main_3r8cj_15";var I={Layout:Z,Header:ee,Main:re};const ne=({children:e})=>i("div",{className:I.Layout,children:[s("header",{className:I.Header,children:"API: coingecko.com"}),s("main",{className:I.Main,children:e})]}),te="_Cards_1608q_1",se="_Settings_1608q_12",oe="_Icon_1608q_17",ae="_Positive_1608q_20";var g={Cards:te,Settings:se,Icon:oe,Positive:ae};const ie="_Card_kx060_1",ce="_Container_kx060_11",le="_CoinImage_kx060_15",de="_CoinInfo_kx060_24",_e="_InfoRow_kx060_30",ue="_CardFooter_kx060_36",pe="_IconButton_kx060_42",Ce="_LikeButtonPositive_kx060_48";var c={Card:ie,Container:ce,CoinImage:le,CoinInfo:de,InfoRow:_e,CardFooter:ue,IconButton:pe,LikeButtonPositive:Ce};const he="_DotLeader_1xhzr_1";var fe={DotLeader:he};const S=()=>s("div",{className:fe.DotLeader}),F=({id:e,name:r,market_cap_rank:n,image:d,current_price:o,high_24h:a,low_24h:_,liked:u,likeClicked:p,deleteClicked:C})=>i("div",{className:c.Card,children:[i("div",{className:c.Container,children:[s("div",{className:c.CoinImage,children:s("img",{src:d,alt:e})}),i("div",{className:c.CoinInfo,children:[i("div",{className:c.InfoRow,children:[s("span",{children:"Market rank:"}),s(S,{}),s("span",{children:n})]}),i("div",{className:c.InfoRow,children:[s("span",{children:"Coin:"}),s(S,{}),s("span",{children:r})]}),i("div",{className:c.InfoRow,children:[s("span",{children:"Price:"}),s(S,{}),s("span",{children:o})]})]})]}),i("div",{className:c.CardFooter,children:[i("div",{className:c.InfoRow,children:[i("div",{children:[s("span",{children:"24h highest:"}),s("span",{children:a})]}),i("div",{children:[s("span",{children:"24h lowest:"}),s("span",{children:_})]})]}),s(B,{onClick:()=>p(e,!u),className:[c.IconButton,u?c.LikeButtonPositive:null].join(" ")}),s(j,{onClick:()=>C(e),className:[c.IconButton].join(" ")})]})]});var l;(function(e){e.FETCH_COINS="FETCH_COINS",e.FETCH_COINS_SUCCESS="FETCH_COINS_SUCCESS",e.FETCH_COINS_ERROR="FETCH_COINS_ERROR",e.UPDATE_COIN="CHANGE_COIN",e.DELETE_COIN="DELETE_COIN"})(l||(l={}));const ge="https://api.coingecko.com/api/v3",me={coins:[],isFetching:!1,errorMessage:null,page:1},Ie=(e=me,r)=>{switch(r.type){case l.FETCH_COINS:return{isFetching:!0,errorMessage:null,coins:e.coins,page:e.page};case l.FETCH_COINS_SUCCESS:return{isFetching:!1,errorMessage:null,coins:[...e.coins,...r.payload],page:e.page+1};case l.FETCH_COINS_ERROR:return{isFetching:!1,errorMessage:r.payload,coins:e.coins,page:e.page};case l.UPDATE_COIN:return{isFetching:!1,errorMessage:null,coins:e.coins.map(n=>n.id===r.payload.id?h(h({},n),r.payload.params):n),page:e.page};case l.DELETE_COIN:return{isFetching:e.isFetching,errorMessage:e.errorMessage,coins:e.coins.filter(n=>n.id!==r.payload),page:e.page};default:return e}},Se=b({coinsState:Ie}),k=A(Se,$(U)),ke=()=>async e=>{try{if(!k.getState().coinsState.isFetching){e({type:l.FETCH_COINS});const r=await q.get(`${ge}/coins/markets?vs_currency=usd&per_page=4&page=${k.getState().coinsState.page}}`);e({type:l.FETCH_COINS_SUCCESS,payload:r.data.map(n=>E(h({},n),{liked:!1}))})}}catch(r){e({type:l.FETCH_COINS_ERROR,payload:r instanceof Error?r.message:"Unknown error occurred, check console for more details"})}},Ne=(e,r)=>n=>{n({type:l.UPDATE_COIN,payload:{id:e,params:r}})},ve=e=>r=>{r({type:l.DELETE_COIN,payload:e})};var ye=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",fetchCoins:ke,updateCoin:Ne,deleteCoin:ve});const Ee=()=>{const e=z(),r=G(ye,e),{fetchCoins:n}=r;return f.exports.useEffect(()=>{n()},[]),r},Fe=K,Oe=(e,r)=>{let n=[];return Object.keys(r).forEach(d=>{n.push(...e.filter(o=>o[d]===r[d]))}),n},Re=()=>{const[e,r]=f.exports.useState({isFiltered:!1,filteredCoinsId:[]}),{coins:n,isFetching:d,errorMessage:o}=Fe(t=>t.coinsState),{fetchCoins:a,updateCoin:_,deleteCoin:u}=Ee(),p=f.exports.useRef(null),C=(t,m)=>{_(t,{liked:m})},N=t=>{u(t)},O=()=>{r(()=>({isFiltered:!e.isFiltered,filteredCoinsId:Oe(n,{liked:!0}).map(t=>t.id)}))},R=f.exports.useCallback(()=>{const{current:t}=p;if(!t||e.isFiltered)return;const{scrollTop:m,scrollHeight:L,offsetHeight:H}=t,T=L-H;m>T-100&&a()},[e]);return i("div",{className:g.Cards,ref:p,onWheel:R,children:[s("div",{className:g.Settings,children:i("div",{children:[s(W,{onClick:O,className:[g.Icon,e.isFiltered?g.Positive:null].join(" ")}),"- Show only liked"]})}),d&&s("div",{children:"Loading..."}),o&&s("div",{children:o}),e.isFiltered?n.filter(t=>e.filteredCoinsId.includes(t.id)).map(t=>s(F,{id:t.id,name:t.name,image:t.image,market_cap_rank:t.market_cap_rank,current_price:t.current_price,high_24h:t.high_24h,low_24h:t.low_24h,liked:t.liked,likeClicked:C,deleteClicked:N},t.id)):n.map(t=>s(F,{id:t.id,name:t.name,image:t.image,market_cap_rank:t.market_cap_rank,current_price:t.current_price,high_24h:t.high_24h,low_24h:t.low_24h,liked:t.liked,likeClicked:C,deleteClicked:N},t.id))]})};function Le(){return s("div",{className:Y.App,children:s(ne,{children:s(Re,{})})})}J.render(s(Q.StrictMode,{children:s(V,{store:k,children:s(Le,{})})}),document.getElementById("root"));
